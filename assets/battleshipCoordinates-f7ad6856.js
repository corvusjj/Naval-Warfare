var u=Object.defineProperty;var p=(r,t,s)=>t in r?u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var c=(r,t,s)=>(p(r,typeof t!="symbol"?t+"":t,s),s);function k(){const r=document.createElement("div");r.classList.add("board");const t=["","A","B","C","D","E","F","G","H","I","J"],s=["0","1","2","3","4","5","6","7","8","9","10"],e=["1","2","3","4","5","6","7","8","9","10"];let i=0,o=0;(function(){for(let n=0;n<11;n++){const h=document.createElement("div");h.textContent=t[n],h.classList.add("square"),h.classList.add("square-axis"),h.style.borderLeft="none",r.appendChild(h)}})();for(let a=0;a<110;a++){const n=document.createElement("div");n.classList.add("square"),n.style.borderTop="none",r.appendChild(n),i===0?(n.classList.add("square-axis"),n.textContent=`${e[o]}`):(n.style.borderLeft="none",n.setAttribute("data-coord",`${e[o]}-${s[i]}`)),i++,i>10&&(i=0,o++)}return r}function d(){const r=[],t="0ABCDEFGHIJ";r.push(t.split(""));for(let s=1;s<=10;s++){const i="0..........".split("");i[0]=s.toString(),r.push(i)}return r}class g{constructor(){c(this,"board");c(this,"ships");c(this,"shipCoordinates");this.board=d(),this.ships={},this.shipCoordinates={}}reset(){this.board=d(),this.ships={},this.shipCoordinates={}}checkAllSunk(){let t=!0;for(const s in this.ships)if(!this.ships[s].isSunk()){t=!1;break}return t}seekCoordinates(t,s){const e=t.getLength(),i=t.getDirection();let o=parseInt(s.split("-")[0]),a=parseInt(s.split("-")[1]),n=!0;const h=[];for(let l=0;l<e;l++){if(o>10||a>10){n=!1;break}this.board[o][a]!=="."&&(n=!1),h.push([o,a]),i==="vertical"?o++:a++}return{canBePlaced:n,coordinates:h}}markBoard(t,s){const e=s[0],i=s[1];this.board[e][i]=t}setShipCoordinates(t,s){const e=s[0],i=s[1];this.shipCoordinates[t].push([e,i])}placeShip(t,s,e){const i=this.seekCoordinates(t,s);i.canBePlaced!==!1&&(this.shipCoordinates[e]=[],i.coordinates.forEach(o=>{this.markBoard(e,o),this.setShipCoordinates(e,o)}),this.ships[e]=t)}hitShip(t,s){return this.ships[t].hit(),this.ships[t].isSunk()?this.checkAllSunk()?{state:"game-over",coordinates:this.getShipCoordinates(t),squareKey:t}:{state:"sunk",coordinates:this.getShipCoordinates(t),squareKey:t}:{state:"hit",coordinates:[s],squareKey:t}}receiveAttack(t){const s=t[0],e=t[1],i=this.board[s][e];return i==="."?(this.markBoard("o",t),{state:"miss",coordinates:[[s,e]],squareKey:i}):(this.markBoard("x",t),this.hitShip(i,[s,e]))}getShipCoordinates(t){return this.shipCoordinates[t]}getShipsStatus(){const t={};for(const s in this.ships){const e=this.ships[s];t[s]={hits:e.numOfHits(),sunk:e.isSunk()}}return t}getBoard(){return[...this.board]}}class S{constructor(t){c(this,"length");c(this,"hits");c(this,"isVertical");c(this,"sunk");this.length=t,this.hits=0,this.isVertical=!0,this.sunk=!1}getDirection(){return this.isVertical?"vertical":"horizontal"}toggleDirection(){this.isVertical?this.isVertical=!1:this.isVertical=!0}getLength(){return this.length}isSunk(){return!!this.sunk}hit(){this.hits+=1,this.hits===this.length&&(this.sunk=!0)}numOfHits(){return this.hits}}function b(r,t,s){const e=r[0],i=r[1];let o=[];switch(t){case"top":o=[e-s,i];break;case"right":o=[e,i+s];break;case"bottom":o=[e+s,i];break;case"left":o=[e,i-s];break}return o}function C(){const r=[];let[t,s]=[1,1];for(let e=0;e<100;e++)s>10&&(t++,s=1),r.push([t,s]),s++;return r}export{g as G,S,b as c,k as g,C as s};
